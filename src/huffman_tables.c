#include "dct.h"

/*
* Predefined Huffman tables for luminance DC and AC coefficients.
* These tables are based on the JPEG standard.
* ISO/IEC 10918-1 (Annex K.3)
* https://www.w3.org/Graphics/JPEG/itu-t81.pdf (page 149+)
* Rare symbols are left as {0,0} indicating they are not used.
*/

const HuffmanCode huff_dc_lum[16] = {
    {0x00, 2},  // Size 0
    {0x02, 3},  // Size 1
    {0x03, 3},  // Size 2
    {0x04, 3},  // Size 3
    {0x05, 3},  // Size 4
    {0x06, 3},  // Size 5
    {0x0E, 4},  // Size 6
    {0x1E, 5},  // Size 7
    {0x3E, 6},  // Size 8
    {0x7E, 7},  // Size 9
    {0xFE, 8},  // Size 10
    {0x1FE, 9}, // Size 11
    {0,0}, {0,0}, {0,0}, {0,0} // 12-15 (not used)
};

const HuffmanCode huff_ac_lum[256] = {
    // --- Run Length = 0 (No zeroes) ---
    [0x00] = {0x0A, 4}, // EOB (End of Block)
    [0x01] = {0x00, 2}, 
    [0x02] = {0x01, 2}, 
    [0x03] = {0x04, 3}, 
    [0x04] = {0x0B, 4}, 
    [0x05] = {0x1A, 5}, 
    [0x06] = {0x78, 7}, 
    [0x07] = {0xF8, 8}, 
    [0x08] = {0x3F6, 10}, 
    [0x09] = {0xFF82, 16}, 
    [0x0A] = {0xFF83, 16}, 

    // --- Run Length = 1 (One zero ahead) ---
    [0x11] = {0x0C, 4}, 
    [0x12] = {0x1B, 5}, 
    [0x13] = {0x79, 7}, 
    [0x14] = {0x3F7, 10}, 
    [0x15] = {0x7F6, 11}, 
    [0x16] = {0xFF84, 16}, 
    [0x17] = {0xFF85, 16}, 
    [0x18] = {0xFF86, 16}, 
    [0x19] = {0xFF87, 16}, 
    [0x1A] = {0xFF88, 16}, 

    // --- Run Length = 2 ---
    [0x21] = {0x1C, 5}, 
    [0x22] = {0xF9, 8}, 
    [0x23] = {0x3F8, 10}, 
    [0x24] = {0x7F7, 11}, 
    [0x25] = {0xFF89, 16}, 
    [0x26] = {0xFF8A, 16}, 
    [0x27] = {0xFF8B, 16}, 
    [0x28] = {0xFF8C, 16}, 

    // --- Run Length = 3 ---
    [0x31] = {0x3A, 6}, 
    [0x32] = {0xFA, 8}, 
    [0x33] = {0x3F9, 10}, 
    [0x34] = {0xFF8D, 16}, 
    [0x35] = {0xFF8E, 16}, 
    [0x36] = {0xFF8F, 16}, 
    [0x37] = {0xFF90, 16}, 

    // --- Run Length = 4 ---
    [0x41] = {0x3B, 6}, 
    [0x42] = {0x3FA, 10}, 
    [0x43] = {0x7F8, 11}, 
    [0x44] = {0xFF91, 16}, 
    [0x45] = {0xFF92, 16}, 
    [0x46] = {0xFF93, 16}, 

    // --- Run Length = 5 ---
    [0x51] = {0x3C, 6}, 
    [0x52] = {0x7F9, 11}, 
    [0x53] = {0xFF94, 16}, 
    [0x54] = {0xFF95, 16}, 
    [0x55] = {0xFF96, 16}, 

    // --- Run Length = 6 ---
    [0x61] = {0x3D, 6}, 
    [0x62] = {0xFF97, 16}, 
    [0x63] = {0xFF98, 16}, 
    [0x64] = {0xFF99, 16}, 

    // --- Run Length = 7 ---
    [0x71] = {0x7A, 7}, 
    [0x72] = {0xFF9A, 16}, 
    [0x73] = {0xFF9B, 16}, 
    [0x74] = {0xFF9C, 16}, 

    // --- Run Length = 8 ---
    [0x81] = {0x7B, 7}, 
    [0x82] = {0xFF9D, 16}, 
    [0x83] = {0xFF9E, 16}, 
    [0x84] = {0xFF9F, 16}, 

    // --- Run Length = 9 ---
    [0x91] = {0x7C, 7}, 
    [0x92] = {0xFFA0, 16}, 
    [0x93] = {0xFFA1, 16}, 
    [0x94] = {0xFFA2, 16}, 

    // --- Run Length = 10 (0xA) ---
    [0xA1] = {0x7D, 7}, 
    [0xA2] = {0xFFA3, 16}, 
    [0xA3] = {0xFFA4, 16}, 
    [0xA4] = {0xFFA5, 16}, 

    // --- Run Length = 11 (0xB) ---
    [0xB1] = {0xFB, 8}, 
    [0xB2] = {0xFFA6, 16}, 
    [0xB3] = {0xFFA7, 16}, 
    [0xB4] = {0xFFA8, 16}, 

    // --- Run Length = 12 (0xC) ---
    [0xC1] = {0xFC, 8}, 
    [0xC2] = {0xFFA9, 16}, 
    [0xC3] = {0xFFAA, 16}, 
    [0xC4] = {0xFFAB, 16}, 

    // --- Run Length = 13 (0xD) ---
    [0xD1] = {0xFD, 8}, 
    [0xD2] = {0xFFAC, 16}, 
    [0xD3] = {0xFFAD, 16}, 
    [0xD4] = {0xFFAE, 16}, 

    // --- Run Length = 14 (0xE) ---
    [0xE1] = {0xFE, 8}, 
    [0xE2] = {0xFFAF, 16}, 
    [0xE3] = {0xFFB0, 16}, 
    [0xE4] = {0xFFB1, 16}, 

    // --- Run Length = 15 (0xF) ---
    [0xF0] = {0x7FF, 11}, // ZRL (16 continuous zeros)
    [0xF1] = {0xFFB2, 16}, 
    [0xF2] = {0xFFB3, 16}, 
    [0xF3] = {0xFFB4, 16}, 
    [0xF4] = {0xFFB5, 16}, 
    [0xF5] = {0xFFB6, 16}, 
    [0xF6] = {0xFFB7, 16}, 
    [0xF7] = {0xFFB8, 16}, 
    [0xF8] = {0xFFB9, 16}, 
    [0xF9] = {0xFFBA, 16}, 
    [0xFA] = {0xFFBB, 16}
};